{% extends "base.html" %}

{% comment %}
context variables:
    user_form
    profile_form
{% endcomment %}

{% block title %}upTee - Settings{% endblock title %}

{% block content %}

<div class="content_box w500 minimal">
    <div class="content_headline minimal">User settings</div>
    <div class="content">

        <form method="post" action="{{ request.path }}">
            <input type="hidden" name="csrfmiddlewaretoken" value="{% with csrf_token as csrf_token_clean %}{{ csrf_token_clean }}{% endwith %}">
            <table class="form_table">
                <tbody>
                    <tr>
                        <th></th>
                        <th></th>
                        <th>Mark to publish to non users</th>
                    </tr>
                    <tr>
                        <th><label for="name">Name</label></th>
                        <td>
                            <ul>
                                {% for error in user_form.first_name.errors %}
                                    <li>{{ error|escape }}</li>
                                {% endfor %}
                                {% for error in user_form.last_name.errors %}
                                    <li>{{ error|escape }}</li>
                                {% endfor %}
                            </ul>
                            {{ user_form.first_name }}{{ user_form.last_name }}
                        </td>
                        <td>
                            <input type="checkbox" name="publish_name" id="id_publish_name"{% if profile_form.publish_name.value != False %} checked="checked"{% endif %}>
                            <label class="checkbox" for="id_publish_name"></label>
                        </td>
                    </tr>
                    <tr>
                        <th>{{ user_form.email.label_tag }}</th>
                        <td>{{ user_form.email.errors }}{{ user_form.email }}</td>
                        <td>This email won't be published!</td>
                    </tr>
                    <tr>
                        <th>{{ profile_form.ingame_name.label_tag }}</th>
                        <td>{{ profile_form.ingame_name.errors }}{{ profile_form.ingame_name }}</td>
                        <td>
                            <input type="checkbox" name="publish_ingame_name" id="id_publish_ingame_name"{% if profile_form.publish_ingame_name.value != False %} checked="checked"{% endif %}>
                            <label class="checkbox" for="id_publish_ingame_name"></label>
                        </td>
                    </tr>
                    <tr>
                        <th>{{ profile_form.website.label_tag }}</th>
                        <td>{{ profile_form.website.errors }}{{ profile_form.website }}</td>
                        <td>
                            <input type="checkbox" name="publish_website" id="id_publish_website"{% if profile_form.publish_website.value != False %} checked="checked"{% endif %}>
                            <label class="checkbox" for="id_publish_website"></label>
                        </td>
                    </tr>
                    <tr>
                        <th>{{ profile_form.contact.label_tag }}</th>
                        <td>{{ profile_form.contact.errors }}{{ profile_form.contact }}</td>
                        <td>
                            <input type="checkbox" name="publish_contact" id="id_publish_contact"{% if profile_form.publish_contact.value != False %} checked="checked"{% endif %}>
                            <label class="checkbox" for="id_publish_contact"></label>
                        </td>
                    </tr>
                    <tr>
                        <th>{{ profile_form.fav_mod.label_tag }}</th>
                        <td>{{ profile_form.fav_mod.errors }}{{ profile_form.fav_mod }}</td>
                        <td>
                            <input type="checkbox" name="publish_fav_mod" id="id_publish_fav_mod"{% if profile_form.publish_fav_mod.value != False %} checked="checked"{% endif %}>
                            <label class="checkbox" for="id_publish_fav_mod"></label>
                        </td>
                    </tr>
                    <tr>
                        <th>{{ profile_form.fav_map.label_tag }}</th>
                        <td>{{ profile_form.fav_map.errors }}{{ profile_form.fav_map }}</td>
                        <td>
                            <input type="checkbox" name="publish_fav_map" id="id_publish_fav_map"{% if profile_form.publish_fav_map.value != False %} checked="checked"{% endif %}>
                            <label class="checkbox" for="id_publish_fav_map"></label>
                        </td>
                    </tr>
                    <tr>
                        <th>{{ profile_form.gender.label_tag }}</th>
                        <td>{{ profile_form.gender.errors }}{{ profile_form.gender }}</td>
                        <td>
                            <input type="checkbox" name="publish_gender" id="id_publish_gender"{% if profile_form.publish_gender.value != False %} checked="checked"{% endif %}>
                            <label class="checkbox" for="id_publish_gender"></label>
                        </td>
                    </tr>
                    <tr>
                        <th>{{ profile_form.birthday.label_tag }}</th>
                        <td>{{ profile_form.birthday.errors }}{{ profile_form.birthday }} Your age will be shown like this: 22-27 | (YYYY-MM-DD)</td>
                        <td>
                            <input type="checkbox" name="publish_birthday" id="id_publish_birthday"{% if profile_form.publish_birthday.value != False %} checked="checked"{% endif %}>
                            <label class="checkbox" for="id_publish_birthday"></label>
                        </td>
                    </tr>
                    <tr>
                        <th>{{ profile_form.template.label_tag }}</th>
                        <td>{{ profile_form.template.errors }}{{ profile_form.template }}</td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <input class="button" type="submit" value="Submit">
        </form>
    </div>
</div>

<div class="content_box w500 minimal">
    <div class="content_headline minimal">Change Password</div>
    <div class="content">
        <a href="{% url 'change_password' %}">Change password</a>
    </div>

    {% if user.is_staff %}
    <div class="content_headline minimal">Generate testing keys</div>
    <div class="content">
        <a href="{% url 'generate_testing_keys' %}">Generate testing keys</a>
    </div>
    {% endif %}
</div>

{% endblock %}
